<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE sqlMap		
	 PUBLIC "-//ibatis.apache.org//DTD SQL Map 2.0//EN"		
	 "http://ibatis.apache.org/dtd/sql-map-2.dtd">

<sqlMap namespace="content">
	<typeAlias alias="hashMap" type="java.util.HashMap"/>
	
	<insert id="contentDAO.insert">
		INSERT INTO 
			TN_CONTENT (
				CONTENT_ID 
				, TITLE
				, USER_IDX
				, IP_ADDR 
				<isNotEmpty prepend=", " property="contentType">
				CONTENT_TYPE
				</isNotEmpty>
				) 
			VALUES ( 
				#contentId#
				, #title#
				, #userIdx#
				, #ipAddr#
				<isNotEmpty prepend=", " property="contentType">
				, #contentType#
				</isNotEmpty>
			)
	</insert>
	
	<update id="contentDAO.delete">
		UPDATE 
		SET DEL_YN = 'Y'
			, UPD_TIME = sysdate
		WHERE 
			CONTENT_ID = #contentId# 
			AND USER_IDX = #userIdx#
	</update>
	
	<update id="contentDAO.update">
		UPDATE TN_CONTENT
		SET
			TITLE = #title#
			, UPD_TIME = sysdate
			<isNotEmpty prepend=", " property="contentType">
			CONTENT_TYPE = #contentType#
			</isNotEmpty>
		WHERE
			CONTENT_ID = #contentId#
	</update>
	
	<sql id="contentDAO.preList">
		SELECT * FROM  (
			SELECT C.*, ROWNUM RNUM FROM (
	</sql>
	<sql id="contentDAO.nextList">
			) C
			WHERE ROWNUM &lt;= #lastIndex#
		)
		WHERE RNUM &gt;= #firstIndex#
	</sql>
</sqlMap>